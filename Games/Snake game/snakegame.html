<body>
  <div class="loader" id="loader"></div>
  <header>
    <a href="../../INDEX.html" class="logo">Our-ani</a>
    <ul>
      <li><a href="../../INDEX.html" class="active">Home</a></li>
      <li><a class="GoBack" href="../../gamespage.html"><i class="fa fa-angle-left" aria-hidden="true"></i></a></li>
    </ul>
  </header>

  <div class="container">
    <div class="game-board-container">
      <p id="game-over">Game Over</p>
    </div>
    <span class="line"></span>
    <div class="btn-container">
      <button class="btn">Left</button>
      <button class="btn">Up</button>
      <button class="btn">Right</button>
      <button class="btn">Down</button>
    </div>
  </div>

  <p id="score">Score: 0</p>

  <script>
    const gameBoardContainer = document.querySelector('.game-board-container');
    const loader = document.getElementById('loader'); // Target the loader element
    const DPI = window.devicePixelRatio;
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');

    function createCanvas(width, height) {
      canvas.style.width = `${width}px`;
      canvas.style.height = `${height}px`;
      canvas.width = Math.floor(width * DPI);
      canvas.height = Math.floor(height * DPI);
      ctx.scale(DPI, DPI);
      gameBoardContainer.appendChild(canvas);

      // Hide the loader after the canvas is created
      loader.style.display = 'none';
    }

    function background(color = 'black') {
      canvas.style.background = color;
    }

    // (Other code remains the same, omitted for brevity)

    createCanvas(360, 400); // Initialize the canvas
    background('#D5D5D5');

    // Rest of the game logic (unchanged)
    const buttons = document.querySelectorAll('.btn');
    const btnLeft = buttons[0];
    const btnUp = buttons[1];
    const btnRight = buttons[2];
    const btnDown = buttons[3];
    const scoreDom = document.querySelector('#score');
    const gameOverDom = document.querySelector('#game-over');
    const snake = new SnakeGameAI();

    let CONTROL = Direction.RIGHT;
    btnLeft.addEventListener('click', () => CONTROL = Direction.LEFT);
    btnUp.addEventListener('click', () => CONTROL = Direction.UP);
    btnRight.addEventListener('click', () => CONTROL = Direction.RIGHT);
    btnDown.addEventListener('click', () => CONTROL = Direction.DOWN);

    let now, then = Date.now();
    let interval = 1000 / snake.getFrameRate();

    function animate() {
      now = Date.now();
      const delta = now - then;

      if (delta > interval) {
        then = now - (delta % interval);
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const infoObj = snake.playStep(CONTROL);
        snake.draw(ctx);

        scoreDom.innerHTML = `Score: ${infoObj.score}`;
        interval = 1000 / snake.getFrameRate();
      }

      requestAnimationFrame(animate);
    }

    animate(); // Start the animation loop
  </script>
</body>
